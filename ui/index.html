<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>
            Repo
        </title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content=""><!-- Le styles -->
        <link href="bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css">
        <style type="text/css">
        body {
          padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
        }
        .pkg-info {
        width: 90%;
        padding: 5px;
        margin-left:8px;
        border: solid 1px silver;
        background: #DFEFEF;    
        }
        .pkg-search-ahead {
        width: 90%;
        }
        .tick {
        color: green;
        margin-right: 10px;
        }
        h4 {
          margin-top: 30px;
          margin-bottom: 20px;
        }
        .cross {
        color: red;
        margin-right: 10px;
        }
        .want {
        font-weight: bold;
        }

        .pkg-info-help {
          margin: 15px;
          font-size: smaller;
        }

        .badge {
        font-size: 0.7em;
        width: 30px;
        text-align: center;
        font-weight: bold;
        padding: 3px 10px 3px 10px;
        border-top-left-radius: 3px;
        border-top-right-radius: 3px;
        border-bottom-right-radius: 3px;
        border-bottom-left-radius: 3px;
        margin-right: 15px;

        }

        .cli {        
        background-color: rgba(120,180,100,.8);
        color: white;        
        }


        .web {        
        background-color: rgba(120,120,180,.8);
        color: white;        
        }

        P
        .src {        
        background-color: #45E545;
        color: white;        
        }

        .have {
        padding: 10px;
        margin: 10px 50px 10px 20px;
        background-color: rgba(120,120,100,.1);
        background-clip: padding-box;
        padding: 10px;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
        border-bottom-right-radius: 5px;
        border-bottom-left-radius: 5px;
        font-family: monospace;
        }
        </style><!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
      <script src="bootstrap/js/html5shiv.js"></script>
    <![endif]-->
        <!-- Fav and touch icons -->
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="bootstrap/ico/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="bootstrap/ico/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="bootstrap/ico/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="bootstrap/ico/apple-touch-icon-57-precomposed.png">
        <link rel="shortcut icon" href="bootstrap/ico/favicon.png">
    </head>
    <body>
        <div class="navbar navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="brand" href="#">MailOnline Repository</a>
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                            <li class="active">
                                <a href="#">Home</a>
                            </li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span3">
                    <!--Sidebar content-->
                    <input type="text" class='pkg-search-ahead search-query' data-source="searchIndexFn">
                    <div class='pkg-info' style='display:none;'></div>
                    <div class='pkg-info-help'>Type any part of the component name in the search box above.</div>
                </div>
                <div class="span9">
                    <!--Body content-->
                    <div class='pkg-preview'>
                        <h2>
                            This is a prototype of a Style repository.
                        </h2>
                        <p>
                            The idea is that we can use this to store all of the various front end components (html, css, js) that can be rendered on the front end of the site. Each type will have an associated editor, where that editor allows you to create an instance of an object of this style (e.g. the underlying content) but the style itself is managed separately.
                        </p>
                        <p>
                            Because components are only getting more complex, it seems sensible to give them a lifecycle of there own, and build a process and toolset around them.
                        </p>
                        <h4>
                            We need a central repository that enables us to effectively manage the lifecycle of components:
                        </h4>
                        <div class='want'>
                            <span class='tick'>✓</span> I can install a client for it in one step (nodejs already installed)
                        </div>
                        <div class='have'>
                            <span class='cli badge'>CLI</span> git clone https://github.com/cliftonc/repo ; cd repo ; npm install -g ; repo
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Create a component as a folder containing: a package descriptor, html, css (or sass), javascript (or coffeescript), static sample data and any other assets.
                        </div>
                        <div class='have'>
                            <span class='src badge'>SRC</span> See the <a href="https://github.com/cliftonc/repo/tree/master/examples" target="_new">examples</a> folder.
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Package this component and publish it to a repository via a single command.
                        </div>
                        <div class='have'>
                            <span class='cli badge'>CLI</span> cd image_swap_carousel; repo publish
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Preview the component as it would appear.
                        </div>
                        <div class='have'>
                            <span class='web badge'>WEB</span> <a href="http://rpo.jit.su/preview/image_swap_carousel" target="_new">http://rpo.jit.su/preview/image_swap_carousel</a>
                        </div>

                        <div class='want'>
                            <span class='tick'>✓</span> Fetch an existing version of a component for modification.
                        </div>
                        <div class='have'>
                            <p><span class='cli badge'>CLI</span> repo fetch image_swap_carousel</p>                            
                        </div>

                        <div class='want'>
                            <span class='tick'>✓</span> Quickly bump the version number
                        </div>
                        <div class='have'>
                            <p><span class='cli badge'>CLI</span> repo bump</p>                            
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Have the preview automatically update as changes are published to it.
                        </div>
                        <div class='have'>
                            <p><span class='cli badge'>CLI</span> repo fetch image_swap_carousel</p>
                            <p><span class='cli badge'>CLI</span> cd image_swap_carousel</p>
                            <p><span class='cli badge'>CLI</span> repo bump</p>
                            <p><span class='cli badge'>CLI</span> repo publish -a</p>
                            <p><span class='web badge'>WEB</span> <a href="http://rpo.jit.su/preview/image_swap_carousel" target="_new">http://rpo.jit.su/preview/image_swap_carousel</a> in another window.</p>
                            <p>Make changes to any of the assets in the folder, the preview will update as soon as you save.</p>
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Make a specific version of a component live.
                        </div>
                        <div class='have'>
                            <p><span class='cli badge'>CLI</span>repo live image_swap_carousel 0.0.6</p>                            
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Track changes to a component, and allow specifying a single version to be 'live' at any one time.
                        </div>
                        <div class='have'>
                            <p><span class='cli badge'>CLI</span>repo info image_swap_carousel</p>
                            <p><span class='web badge'>WEB</span><a href="http://rpo.jit.su/api/info/image_swap_carousel" target="_new">http://rpo.jit.su/api/info/image_swap_carousel</a> </p>                           
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Retrieve an index of components by type (for the authoring nodes to use).
                        </div>
                        <div class='have'>
                            <p><span class='cli badge'>CLI</span> repo index gallery</p>
                            <p><span class='web badge'>WEB</span> <a href="http://rpo.jit.su/api/index/type/gallery" target="_new">http://rpo.jit.su/api/index/type/gallery</a></p>
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Retrieve an index of all components (for the publishing nodes to use).
                        </div>
                        <div class='have'>
                            <p><span class='cli badge'>CLI</span> repo index</p>
                            <p><span class='web badge'>WEB</span> <a href="http://rpo.jit.su/api/index" target="_new">http://rpo.jit.su/api/index</a></p>
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Search the repository.
                        </div>
                        <div class='have'>
                            <p><span class='cli badge'>CLI</span> repo search showbiz</p>
                            <p><span class='web badge'>WEB</span> <a href="http://rpo.jit.su/api/index/search/home" target="_new">http://rpo.jit.su/api/index/search/home</a></p>
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> View all versions of a component, including live / latest.
                        </div>
                        <div class='have'>
                            <p><span class='cli badge'>CLI</span>repo versions image_swap_carousel</p>
                            <p><span class='web badge'>WEB</span> <a href="http://rpo.jit.su/api/versions/image_swap_carousel" target="_new">http://rpo.jit.su/api/versions/image_swap_carousel</a></p>
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Preview any previous version of a component.
                        </div>
                        <div class='have'>
                            <span class='web badge'>WEB</span><a href="http://rpo.jit.su/preview/image_swap_carousel/0.0.6" target="_new">http://rpo.jit.su/preview/image_swap_carousel/0.0.6</a>
                        </div>
                        <div class='want'>
                            <span class='cross'>✗</span> Namespacing by type, to avoid name clashes across types.
                        </div>
                         <div class='have'>
                            <span class='src badge'>SRC</span> todo :(
                        </div>

                          <div class='want'>
                            <span class='cross'>✗</span> Allow a concept of a theme - e.g. a package of packages for a given output.
                        </div>
                         <div class='have'>
                            <span class='src badge'>SRC</span> todo :(
                        </div>
                         <div class='want'>
                            <span class='cross'>✗</span> It to be as secure as hell, per user auth with logging and https.
                        </div>
                         <div class='have'>
                            <span class='src badge'>SRC</span> todo :(
                        </div>

                        <h4>Enables me to distribute packages of CSS effectively to the front end:</h4>
                        <div class='want'>
                            <span class='tick'>✓</span>Use pre-processors like SASS
                        </div>
                        <div class='have'>
                            <span class='src badge'>SRC</span> SASS files can be created with .scss extensions and will be processed.
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span>Request a concatenated and cleaned CSS file that contains all of CSS from all of the LIVE packages.
                        </div>
                        <div class='have'>
                            <span class='web badge'>WEB</span> <a href="http://rpo.jit.su/css/v1" target="_new">http://rpo.jit.su/css/v1</a>
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span>Request a concatenated and cleaned CSS file that contains all of CSS from all of the LATEST packages.
                        </div>
                         <div class='have'>
                            <span class='web badge'>WEB</span> <a href="http://rpo.jit.su/css/v1?latest=true" target="_new">http://rpo.jit.su/css/v1?latest=true</a>
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Cache the above requests for performance reasons.
                        </div>
                         <div class='have'>
                            <span class='src badge'>SRC</span> The final param in the request 'v1' above, is a unique key - the files are cached against this key.
                        </div>
                         <div class='want'>
                            <span class='tick'>✓</span> Control the order in which package CSS is concatenated.
                        </div>
                         <div class='have'>
                            <span class='src badge'>SRC</span> <a href='https://github.com/cliftonc/repo/blob/master/conf/production.json#L6'>Sort order by type</a> and <a href='https://github.com/cliftonc/repo/blob/master/lib/data.js#L307'>sequencing code</a>.
                        </div>
                        <div class='want'>
                            <span class='cross'>✗</span>Request CSS for a custom set of packages. 
                        </div>
                         <div class='have'>
                            <span class='web badge'>SRC</span> todo
                        </div>
                        <div class='want'>
                            <span class='cross'>✗</span>Control / clear caches.
                        </div>
                         <div class='have'>
                            <span class='web badge'>SRC</span> todo
                        </div>
                        <h4>Enables me to distribute packages of JS effectively to the front end:</h4>
                        <div class='want'>
                            <span class='tick'>✓</span>Request a minified JS file that contains all of JS from all of the LIVE packages.
                        </div>
                         <div class='have'>
                             <span class='web badge'>WEB</span> <a href="http://rpo.jit.su/js/v1" target="_new">http://rpo.jit.su/js/v1</a>
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Request a minified &amp; jshinted JS file that contains all of JS from all of the LATEST packages.
                        </div>
                         <div class='have'>
                            <span class='web badge'>WEB</span> <a href="http://rpo.jit.su/js/v1?latest=true" target="_new">http://rpo.jit.su/js/v1?latest=true</a>
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Attach a source map for the minified JS file and provide that source map to allow debugging of the JS.
                        </div>
                         <div class='have'>
                            <span class='web badge'>WEB</span> <a href="http://rpo.nodejitsu.com/jsmap/v1" target="_new">http://rpo.nodejitsu.com/jsmap/v1</a>
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span> Source maps should also respect the LIVE vs LATEST switch.
                        </div>
                         <div class='have'>
                            <span class='web badge'>WEB</span> <a href="http://rpo.nodejitsu.com/jsmap/v1?latest=true" target="_new">http://rpo.nodejitsu.com/jsmap/v1?latest=true</a>
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span>Cache the above requests for performance reasons.
                        </div>
                         <div class='have'>
                            <span class='src badge'>SRC</span> The final param in the request 'v1' above, is a unique key - the files are cached against this key.
                        </div>
                        <div class='want'>
                            <span class='tick'>✓</span>Request JS and sourcemap for a custom set of packages. 
                        </div>
                         <div class='have'>
                            <span class='src badge'>SRC</span> todo
                        </div>
                         <div class='want'>
                            <span class='tick'>✓</span>I can write my JS in coffeescript 
                        </div>
                         <div class='have'>
                            <span class='src badge'>SRC</span> todo
                        </div>

                        <h4>
                            This will give us a workflow for a change to an existing component as simple as: 
                          </h4>

                            <pre>
                              
    repo fetch image_swap_carousel 
    cd image_swap_carousel
    repo bump
    repo publish -a // enable auto publish 
    
    // Open browser: http://rpo.jit.su/preview/image_swap_carousel 
    // edit HTML / CSS / JS, save, changes are reflected live in browser 
    
    // When finished and signed off. 
    repo live image_swap_carousel 0.0.7 

    // Your new carousel is live on the site, go grab a beer

                          </pre>                        

                    </div>
                </div>
            </div>
        </div><!-- /container -->
        <!-- Le javascript
    ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="bootstrap/js/jquery.js" type="text/javascript">
</script><script src="bootstrap/js/bootstrap.min.js" type="text/javascript">
</script><script src="bootstrap/js/lodash.min.js" type="text/javascript">
</script><script src="bootstrap/js/mustache.js" type="text/javascript">
</script><script type="text/javascript">


        $('.pkg-search-ahead').typeahead({
        source: function(query, process) {
            return $.ajax({
                url: '/api/index/search/' + query,
                type: 'get',                
                dataType: 'json',
                success: function(json) {                   
                    process(_.pluck(json,'name'))                  
                }
            });
        },
        updater:function (item) {
            selectPackage(item);
            $('.pkg-info').show();
            //dont forget to return the item to reflect them into input
            return item;
        },
        minLength: 2
        });

        function selectPackage(item) {
        $.ajax({
              url: '/api/info/' + item,
              type: 'get',                
              dataType: 'json',
              success: function(json) { 
                $('.pkg-info').empty().append($('#pkg-info-template').mustache(json));            
                $('.pkg-preview').empty().append($('#pkg-preview-template').mustache(json));            
              }
          });
        }

        </script><script id='pkg-info-template' type='text/html'>
<h4>{{name}}</h4>
        <p>{{description}}</p>
        <p>Live: {{live}}</p>
        <p>Versions: {{#versionList}}{{.}},{{/versionList}}</p>
        <h5>Readme</h5>
        <p>{{readme}}</p>
        </script><script id='pkg-preview-template' type='text/html'>
<iframe src='/preview/{{name}}?latest=true' width='100%' height='600px' frameborder="0"></iframe>     
        </script>
    </body>
</html>